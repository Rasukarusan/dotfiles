# ============================== #
#           SET-OPTION           #
# ============================== #
# ステータスライン非表示
set -g status off
# 色設定
set -g default-terminal 'screen-256color'
set -g terminal-overrides 'xterm:colors=256'
set -g default-shell /usr/local/bin/zsh
set -g default-command /usr/local/bin/zsh
# vim <=> tmux 間でクリップボード利用を可能にする
set -g default-command "reattach-to-user-namespace -l $SHELL"
# prefixキー変更する
set -g prefix C-s
# マウス操作を有効にする
setw -g mouse on
# ESCの反応を早くする
set -g escape-time 1
# 添字を1から始める
set -g base-index 1
setw -g pane-base-index 1
# ウィンドウを閉じた時に番号を詰める
set -g renumber-windows on

# ==========SET-OPTION==========
setw -g mode-keys vi
# ブロードキャスト入力
bind a setw synchronize-panes \; display "synchronize-panes #{?pane_synchronized,on,off}"

# ============================== #
#           BIND-KEY             #
# ============================== #
# 設定リロード
bind r source-file ~/.tmux.conf \; display "Reload Config!"
# iTermでcmd+kでクリアするため
bind -n C-q send-keys -R \; send-keys C-l \; clear-history
# ペイン移動
bind C-l select-pane -L
bind C-j select-pane -D
bind C-k select-pane -U
bind C-h select-pane -R
bind -n C-]  select-pane -t :.+
# ペイン分割
bind h split-window -h -c '#{pane_current_path}'
bind v split-window -c '#{pane_current_path}'

# 新規ウィンドウ作成時カレントディレクトリを引き継ぐ
bind -n M-w new-window -c '#{pane_current_path}'
# マウスで選択した時もクリップボードにコピーする
bind -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy"
# ダブルクリックで単語選択
bind -T copy-mode-vi DoubleClick1Pane \
    select-pane \; \
    send-keys -X select-word \; \
    send-keys -X copy-pipe "pbcopy"
bind -n DoubleClick1Pane \
    select-pane \; \
    copy-mode -M \; \
    send-keys -X select-word \; \
    send-keys -X copy-pipe "pbcopy"

# ============================== #
#           COPY-MODE            #
# ============================== #
# Prefix+Enter/y でコピー
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"
bind -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "pbcopy"
# Esc キーでコピーの反転を解除（コピーモードは抜けない）
bind -T copy-mode-vi Escape send-keys -X clear-selection
# Ctrl-c キーでコピーの反転を解除し、コピーモードから抜ける
bind -T copy-mode-vi C-c send-keys -X cancel
# コピーモード中（Prefix+v 後）C-v で矩形選択開始
bind -T copy-mode-vi v send-keys -X  begin-selection 
bind -T copy-mode-vi C-v send-keys -X rectangle-toggle
# 1行選択
bind -T copy-mode-vi V send-keys -X select-line
# Vi モード中に Ctrl-a で行頭に（Emacs ライク）
bind -T copy-mode-vi C-a send-keys -X start-of-line
# Vi モード中に Ctrl-e で行末に（Emacs ライク）
bind -T copy-mode-vi C-e send-keys -X end-of-line
# 単語の最初の1文字に移動
bind -T copy-mode-vi w send-keys -X next-word
# 単語の最後の1文字に移動
bind -T copy-mode-vi e send-keys -X next-word-end
# w の逆の動き back
bind -T copy-mode-vi b send-keys -X previous-word
# 画面上に映る最上行に移動
bind -T copy-mode-vi g send-keys -X top-line
# 画面上に映る最下行に移動
bind -T copy-mode-vi G send-keys -X bottom-line
# 前方検索
bind -T copy-mode-vi / send-keys -X search-forward
# 後方検索
bind -T copy-mode-vi ? send-keys -X search-backward
# ページスクロール
bind -T copy-mode-vi C-n send-keys -X page-up
bind -T copy-mode-vi C-f send-keys -X page-down
# ページ送り
bind -T copy-mode-vi C-u send-keys -X scroll-up
bind -T copy-mode-vi C-d send-keys -X scroll-down
